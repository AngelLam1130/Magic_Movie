{"ast":null,"code":"import _objectDestructuringEmpty from \"/Users/linanqi/Hackathon/RKA-808/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nimport _slicedToArray from \"/Users/linanqi/Hackathon/RKA-808/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/linanqi/Hackathon/RKA-808/frontend/src/components/UploadedMusic.js\";\nimport React, { useContext, memo, useState } from 'react';\nimport { Context } from '../hooks/useStore';\nimport './UploadedMusic.css';\nconst INVERT_AUDIO_ENDPOINT = \"http://34.86.80.211:8080/invert_audio\";\n\nconst UploadedMusic = ({}) => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        file = _useState2[0],\n        setFile = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        pending = _useState4[0],\n        setPending = _useState4[1];\n\n  const _useContext = useContext(Context);\n\n  _objectDestructuringEmpty(_useContext);\n\n  function handleDownload(version) {\n    // Replace 'url' with the actual endpoint to download the processed file\n    const downloadURL = \"url/version/\".concat(version);\n    fetch(downloadURL).then(response => response.blob()) // Get the response as a blob\n    .then(blob => {\n      // Create a download link and trigger the download\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', \"Music_Version_\".concat(version, \".mp3\"));\n      document.body.appendChild(link);\n      link.click();\n    }).catch(error => {\n      console.error('Error downloading file:', error);\n    });\n  }\n\n  function handleUploadMusicFile(e) {\n    e.preventDefault();\n\n    if (pending) {\n      return;\n    }\n\n    setPending(true);\n    const formData = new FormData();\n    formData.append('file', file);\n    console.log(\"UPLOAD FILE\"); // Replace 'uploadUrl' with the actual endpoint to handle file upload\n\n    const uploadUrl = INVERT_AUDIO_ENDPOINT;\n    fetch(uploadUrl, {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      setPending(false);\n      console.log(\"Inverted file!\");\n      console.log(response.json());\n    }).catch(error => {\n      setPending(false);\n      console.error('Error uploading file:', error);\n    });\n  }\n\n  function handleMusicFile(event) {\n    setFile(event.target.files[0]); // Handle the selected file, e.g., upload it to the server or process it\n\n    console.log(event.target.files[0]);\n  }\n\n  return React.createElement(\"nav\", {\n    className: \"UploadedMusicBar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleUploadMusicFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    className: \"form_element\",\n    onChange: handleMusicFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"form_element\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, pending ? \"Doing neural magic...\" : \"Generate from Uploaded Music\"))), React.createElement(\"div\", {\n    className: \"optionChoice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Music Version 1\"), React.createElement(\"audio\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"form_element\",\n    onClick: () => handleDownload(1),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Download\")), React.createElement(\"div\", {\n    className: \"optionChoice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Music Version 2\"), React.createElement(\"button\", {\n    className: \"form_element\",\n    onClick: () => handleDownload(2),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Download\")), React.createElement(\"div\", {\n    className: \"optionChoice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Music Version 3\"), React.createElement(\"button\", {\n    className: \"form_element\",\n    onClick: () => handleDownload(3),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Download\")));\n};\n\nexport default memo(UploadedMusic);","map":{"version":3,"sources":["/Users/linanqi/Hackathon/RKA-808/frontend/src/components/UploadedMusic.js"],"names":["React","useContext","memo","useState","Context","INVERT_AUDIO_ENDPOINT","UploadedMusic","file","setFile","pending","setPending","handleDownload","version","downloadURL","fetch","then","response","blob","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","catch","error","console","handleUploadMusicFile","e","preventDefault","formData","FormData","append","log","uploadUrl","method","json","handleMusicFile","event","target","files"],"mappings":"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","sourcesContent":["import React, { useContext, memo ,useState} from 'react'\nimport { Context } from '../hooks/useStore'\nimport './UploadedMusic.css'\n\nconst INVERT_AUDIO_ENDPOINT = \"http://34.86.80.211:8080/invert_audio\"\n\nconst UploadedMusic = ({}) => {\n    const[file,setFile] = useState();\n    const[pending, setPending] = useState(false);\n    const {  } = useContext(Context)\n\n    function handleDownload(version) {\n        // Replace 'url' with the actual endpoint to download the processed file\n        const downloadURL = `url/version/${version}`;\n\n        fetch(downloadURL)\n        .then((response) => response.blob()) // Get the response as a blob\n        .then((blob) => {\n            // Create a download link and trigger the download\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', `Music_Version_${version}.mp3`);\n            document.body.appendChild(link);\n            link.click();\n        })\n        .catch((error) => {\n            console.error('Error downloading file:', error);\n        });\n    }\n\n    function handleUploadMusicFile(e) {\n        e.preventDefault();\n        if (pending) {\n            return;\n        }\n        setPending(true);\n        const formData = new FormData();\n        formData.append('file', file);\n\n        console.log(\"UPLOAD FILE\");\n\n        // Replace 'uploadUrl' with the actual endpoint to handle file upload\n        const uploadUrl = INVERT_AUDIO_ENDPOINT;\n\n        fetch(uploadUrl, {\n            method: 'POST',\n            body: formData,\n        })\n            .then((response) => {\n                setPending(false);\n                console.log(\"Inverted file!\");\n                console.log(response.json());\n            })\n            .catch((error) => {\n                setPending(false);\n                console.error('Error uploading file:', error);\n            });\n    }\n\n    function handleMusicFile(event) {\n        setFile(event.target.files[0]);\n        // Handle the selected file, e.g., upload it to the server or process it\n        console.log(event.target.files[0]);\n    }\n\n    return (\n        <nav className=\"UploadedMusicBar\">\n            <form onSubmit={handleUploadMusicFile}>\n                <div className=\"form_container\">\n                    <input type=\"file\" name=\"file\" className=\"form_element\" onChange={handleMusicFile} />\n                    <button className=\"form_element\" type=\"submit\">{\n                        pending ? \"Doing neural magic...\" : \"Generate from Uploaded Music\"\n                    }</button>\n                </div>\n            </form>\n            <div className=\"optionChoice\">\n                <h3>Music Version 1</h3>\n                <audio></audio>\n                <button className=\"form_element\" onClick={() => handleDownload(1)}>Download</button>\n            </div>\n            <div className=\"optionChoice\">\n                <h3>Music Version 2</h3>\n                <button className=\"form_element\" onClick={() => handleDownload(2)}>Download</button>\n            </div>\n            <div className=\"optionChoice\">\n                <h3>Music Version 3</h3>\n                <button className=\"form_element\" onClick={() => handleDownload(3)}>Download</button>\n            </div>\n        </nav>\n    )\n}\n\nexport default memo(UploadedMusic)\n"]},"metadata":{},"sourceType":"module"}