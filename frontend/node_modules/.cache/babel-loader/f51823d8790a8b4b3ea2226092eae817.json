{"ast":null,"code":"import _slicedToArray from \"/Users/linanqi/Hackathon/RKA-808/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/linanqi/Hackathon/RKA-808/frontend/src/components/Toolbar.js\";\nimport React, { useContext, memo, useState } from 'react';\nimport { sequenceList } from '../constants/config';\nimport { Context } from '../hooks/useStore';\nimport './Toolbar.css';\n\nconst ToolBar = ({\n  setStartTime,\n  setPastLapse,\n  setBPM,\n  isSequencePlaying,\n  startTime,\n  BPM\n}) => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        file = _useState2[0],\n        setFile = _useState2[1];\n\n  const _useContext = useContext(Context),\n        selectedSequenceID = _useContext.sequence.id,\n        selectSequence = _useContext.selectSequence;\n\n  function togglePlayback() {\n    if (isSequencePlaying) {\n      setPastLapse(l => l + performance.now() - startTime);\n      setStartTime(null);\n    } else {\n      setStartTime(performance.now());\n    }\n  }\n\n  function stopPlayback() {\n    setPastLapse(0);\n    setStartTime(null);\n  }\n\n  function updateBPM(e) {\n    setBPM(e.target.value);\n  }\n\n  function handleUploadMusicFile() {\n    const formData = new FormData();\n    formData.append('file', file);\n    fetch('url', {\n      method: \"POST\",\n      body: formData\n    }).then(response => response.json()).then(result => {\n      console.log('success', result);\n    }).catch(error => {\n      console.error(\"Error:\", error);\n    });\n  }\n\n  function handleMusicFile(event) {\n    setFile(event.target.files[0]); // Handle the selected file, e.g., upload it to the server or process it\n\n    console.log(event.target.files[0]);\n  }\n\n  function convertSequenceListToMatrix(list) {\n    const matrices = {};\n\n    for (const sequence of list) {\n      const title = sequence.title;\n      const matrix = [];\n\n      for (const track of sequence.trackList) {\n        let zeroArray = new Array(sequence.noteCount).fill(0);\n        const notes = track.onNotes;\n\n        for (const note of notes) {\n          zeroArray[note] = 1;\n        }\n\n        matrix.push(zeroArray);\n      }\n\n      matrices[title] = matrix;\n    }\n\n    return matrices;\n  }\n\n  function generateFromMusic() {\n    let matrices = convertSequenceListToMatrix(sequenceList);\n    console.log(matrices); // fetch('/myserver.endpoint', {\n    //     method: 'POST',\n    //     body: JSON.stringify({\n    //       // Add parameters here\n    //     })\n    //     headers: {\n    //       'Content-type': 'application/json; charset=UTF-8',\n    //     },\n    //   })\n    //      .then((response) => response.json())\n    //      .then((data) => {\n    //         console.log(data);\n    //         // Handle data\n    //      })\n    //      .catch((err) => {\n    //         console.log(err.message);\n    //      });\n  }\n\n  console.log(sequenceList);\n  return React.createElement(\"div\", {\n    className: \"toolbar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleUploadMusicFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    className: \"form_element\",\n    onChange: handleMusicFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"form_element uploadButton\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Upload Song\")), React.createElement(\"button\", {\n    className: \"form_element button_stop\",\n    onClick: stopPlayback,\n    \"aria-label\": \"Stop\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 14 14\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"rect\", {\n    className: \"button_icon_path\",\n    x: \"2\",\n    y: \"2\",\n    width: \"10\",\n    height: \"10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }))), React.createElement(\"button\", {\n    className: \"form_element button_play_pause\",\n    onClick: togglePlayback,\n    \"aria-label\": \"Play / Pause\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"8 8 20 20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, isSequencePlaying && React.createElement(\"path\", {\n    className: \"button_icon_path\",\n    id: \"pause-icon\",\n    \"data-state\": \"playing\",\n    d: \"M11,10 L17,10 17,26 11,26 M20,10 L26,10 26,26 20,26\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), !isSequencePlaying && React.createElement(\"path\", {\n    className: \"button_icon_path\",\n    id: \"play-icon\",\n    \"data-state\": \"paused\",\n    d: \"M11,10 L18,13.74 18,22.28 11,26 M18,13.74 L26,18 26,18 18,22.28\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }))), React.createElement(\"button\", {\n    className: \"form_element button_play_pause\",\n    onClick: generateFromMusic,\n    \"aria-label\": \"Upload\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"Generate from Matrix\"), React.createElement(\"input\", {\n    className: \"form_element input_bpm\",\n    id: \"bpm\",\n    type: \"text\",\n    value: BPM,\n    onChange: updateBPM,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    className: \"label_bpm\",\n    htmlFor: \"bpm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"BPM\"), React.createElement(\"select\", {\n    className: \"form_element select_sequence\",\n    value: selectedSequenceID,\n    onChange: e => selectSequence(+e.target.value),\n    \"aria-label\": \"Select sequence\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, sequenceList.map(seq => {\n    return React.createElement(\"option\", {\n      key: seq.id,\n      value: seq.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, seq.title);\n  })));\n};\n\nexport default memo(ToolBar);","map":{"version":3,"sources":["/Users/linanqi/Hackathon/RKA-808/frontend/src/components/Toolbar.js"],"names":["React","useContext","memo","useState","sequenceList","Context","ToolBar","setStartTime","setPastLapse","setBPM","isSequencePlaying","startTime","BPM","file","setFile","selectedSequenceID","sequence","id","selectSequence","togglePlayback","l","performance","now","stopPlayback","updateBPM","e","target","value","handleUploadMusicFile","formData","FormData","append","fetch","method","body","then","response","json","result","console","log","catch","error","handleMusicFile","event","files","convertSequenceListToMatrix","list","matrices","title","matrix","track","trackList","zeroArray","Array","noteCount","fill","notes","onNotes","note","push","generateFromMusic","map","seq"],"mappings":"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","sourcesContent":["import React, { useContext, memo, useState } from 'react'\nimport { sequenceList } from '../constants/config'\nimport { Context } from '../hooks/useStore'\nimport './Toolbar.css'\n\nconst ToolBar = ({\n    setStartTime,\n    setPastLapse,\n    setBPM,\n    isSequencePlaying,\n    startTime,\n    BPM\n}) => {\n    const[file,setFile] = useState()\n    const { sequence: { id: selectedSequenceID }, selectSequence } = useContext(Context)\n\n    function togglePlayback() {\n        if (isSequencePlaying) {\n            setPastLapse(l => l + performance.now() - startTime)\n            setStartTime(null)\n        } else {\n            setStartTime(performance.now())\n        }\n    }\n\n    function stopPlayback() {\n        setPastLapse(0)\n        setStartTime(null)\n    }\n\n    function updateBPM(e) {\n        setBPM(e.target.value)\n    }\n\n    function handleUploadMusicFile() {\n        const formData = new FormData()\n        formData.append('file',file)\n        fetch(\n            'url',\n            {\n                method:\"POST\",\n                body:formData\n            }\n        ).then((response) => response.json())\n        .then(\n            (result)=>{\n                console.log('success',result)\n            }\n        )\n        .catch(error => {\n            console.error(\"Error:\",error)\n        })\n    }\n\n    function handleMusicFile(event) {\n        setFile(event.target.files[0]);\n        // Handle the selected file, e.g., upload it to the server or process it\n        console.log(event.target.files[0]);\n      }\n\n    function convertSequenceListToMatrix(list) {\n        const matrices = {};\n\n        for (const sequence of list) {\n            const title = sequence.title;\n            const matrix = [];\n            for (const track of sequence.trackList) {\n                let zeroArray = new Array(sequence.noteCount).fill(0);\n                const notes = track.onNotes;\n                for (const note of notes) {\n                    zeroArray[note] = 1;\n                }\n                matrix.push(zeroArray);\n            }\n            matrices[title] = matrix;\n        }\n        return matrices;\n    }\n\n    function generateFromMusic() {\n\n        let matrices = convertSequenceListToMatrix(sequenceList);\n        console.log(matrices);\n\n        // fetch('/myserver.endpoint', {\n        //     method: 'POST',\n        //     body: JSON.stringify({\n        //       // Add parameters here\n        //     })\n        //     headers: {\n        //       'Content-type': 'application/json; charset=UTF-8',\n        //     },\n        //   })\n        //      .then((response) => response.json())\n        //      .then((data) => {\n        //         console.log(data);\n        //         // Handle data\n        //      })\n        //      .catch((err) => {\n        //         console.log(err.message);\n        //      });\n    }\n    console.log(sequenceList)\n\n    return (\n        <div className=\"toolbar\">\n            <form onSubmit={handleUploadMusicFile}>\n                <input type=\"file\" name=\"file\" className=\"form_element\" onChange={handleMusicFile} />\n                <button className=\"form_element uploadButton\">Upload Song</button>\n            </form>\n            <button className=\"form_element button_stop\" onClick={stopPlayback} aria-label=\"Stop\">\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\">\n                    <rect className=\"button_icon_path\" x=\"2\" y=\"2\" width=\"10\" height=\"10\" />\n                </svg>\n            </button>\n            <button className=\"form_element button_play_pause\" onClick={togglePlayback} aria-label=\"Play / Pause\">\n                <svg width=\"14\" height=\"14\" viewBox=\"8 8 20 20\">\n                    {isSequencePlaying && <path className=\"button_icon_path\" id=\"pause-icon\" data-state=\"playing\" d=\"M11,10 L17,10 17,26 11,26 M20,10 L26,10 26,26 20,26\" />}\n                    {!isSequencePlaying && <path className=\"button_icon_path\" id=\"play-icon\" data-state=\"paused\" d=\"M11,10 L18,13.74 18,22.28 11,26 M18,13.74 L26,18 26,18 18,22.28\" />}\n                </svg>\n            </button>\n            <button className=\"form_element button_play_pause\" onClick={generateFromMusic} aria-label=\"Upload\">\n                Generate from Matrix\n            </button>\n            <input className=\"form_element input_bpm\" id=\"bpm\" type=\"text\" value={BPM} onChange={updateBPM} />\n            <label className=\"label_bpm\" htmlFor=\"bpm\">BPM</label>\n            <select\n                className=\"form_element select_sequence\"\n                value={selectedSequenceID}\n                onChange={e => selectSequence(+e.target.value)}\n                aria-label=\"Select sequence\"\n            >\n                {\n                    sequenceList.map(seq => {\n                        return (\n                            <option\n                                key={seq.id}\n                                value={seq.id}\n                            >\n                                {seq.title}\n                            </option>\n                        )\n                    })\n                }\n            </select>\n        </div>\n    )\n}\n\nexport default memo(ToolBar)\n"]},"metadata":{},"sourceType":"module"}